# GetSession Query
# Fetches the current state of an onboarding session by ID
# Requires valid JWT token - user can only access their own session

query GetSession($id: ID!) {
  session(id: $id) {
    id
    status
    progress {
      percentage
      currentPhase
      completedPhases
      nextPhase
      estimatedMinutesRemaining
    }
    referralSource
    expiresAt
    createdAt
    updatedAt
    parent {
      id
      email
      phone
      firstName
      lastName
      relationship
      isGuardian
    }
    child {
      id
      first_name
      last_name
      date_of_birth
      gender
      school_name
      grade
    }
    assessment {
      id
      status
      responses
      riskFlags
      summary
      consentGiven
      score
    }
    insurance {
      id
      payerName
      subscriberName
      memberId
      policyNumber
      groupNumber
      verificationStatus
    }
    messages {
      id
      role
      content
      createdAt
    }
  }
}
