# Query to fetch self-pay rate information including package discounts
#
# Uses costComparison query from backend Epic 6 (Story 6.3)
# Returns self-pay estimate from the cost comparison which includes:
# - baseRate: Per session rate (e.g., "$50 per session")
# - packageOptions: Array of bulk session packages with discounts
# - financialAssistanceInfo: Whether assistance programs exist
#
# Usage: Called when displaying cost estimation screen to show
# self-pay options alongside or instead of insurance estimates.
#
# NOTE: For standalone self-pay rates, this query gets the selfPayEstimate
# from costComparison. Use GetCostEstimate for full comparison data.

query GetSelfPayRates($sessionId: ID!) {
  costComparison(sessionId: $sessionId) {
    selfPayEstimate {
      baseRate
      totalForTypicalTreatment
      slidingScaleInfo
      packageOptions {
        sessions
        totalPrice
        perSessionCost
        savings
        description
      }
      transparentPricingMessage
      whatIsIncluded
      whatIsNotIncluded
    }
    highlightSelfPay
  }
  financialAssistanceInfo {
    available
    eligibilityCriteria
    applicationUrl
    description
    slidingScaleAvailable
    discountRange
  }
}
