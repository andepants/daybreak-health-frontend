# GetTherapistAvailability Query
# Fetches available appointment slots for a specific therapist
# Uses therapistAvailability query from backend Epic 5 (Story 5.2)
# Used by the scheduling calendar to display bookable time slots
# Requires valid JWT token - user can only access availability when booking for their own session
#
# When sessionId is provided, filters slots to only show those that overlap
# with the patient's submitted availability preferences.

query GetTherapistAvailability(
  $therapistId: ID!
  $startDate: ISO8601DateTime!
  $endDate: ISO8601DateTime!
  $timezone: String
  $sessionId: ID
) {
  therapistAvailability(
    therapistId: $therapistId
    startDate: $startDate
    endDate: $endDate
    timezone: $timezone
    sessionId: $sessionId
  ) {
    therapistId
    therapistName
    therapistPhotoUrl
    timezone
    availableDates {
      date
      hasAvailability
      slots {
        id
        startTime
        endTime
        isAvailable
        timezone
      }
    }
  }
}
